---
import MainHeader from "../components/MainHeader.astro";
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import myImage from "../assets/jean-guy-nakars-nsMSEUHuOEU-unsplash.jpg";
import Section from "../components/Section.astro";
---

<Layout title="Sunshine Solutions" description="A conceptual business website">
  <MainHeader />
  <main class="main">
    <div id="hero" class="container">
      <h2>
        <p>
          Constant.<br />
          Illuminating.<br />
          Eternal.
        </p>
      </h2>
      <Image src={myImage} alt="雄大な朝日の景色" class="hero" />
    </div>
    <Section />
  </main>
</Layout>

<style>
  .container {
    container-type: inline-size;
    min-height: 100svh;
    position: relative;
    background-color: black;
  }
  .hero {
    position: absolute;
    width: 100%;
    height: 100svh;
    object-fit: cover;
  }
  h2 {
    position: absolute;
    bottom: 15svh;
    left: 12vw;
    z-index: 10;
    color: aliceblue;
  }
  p {
    font-size: 6.75rem;
    line-height: 6.75rem;
    font-family: "cormorant garamond", serif;
    font-weight: 500;
    filter: drop-shadow(0 0 1rem hsl(30 100% 40%));
  }
  .headline {
    font-size: 2rem;
    font-weight: 600;
    @container (min-width: 600px) {
      color: orange;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const header = document.getElementById("header");
    const hero = document.getElementById("hero");

    const observerOptions = {
      root: null,
      rootMargin: "0px",
      threshold: 0.5,
    };

    const observerCallback = (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          header.classList.remove("background");
          return;
        }
        if (!entry.isIntersecting) {
          header.classList.add("background");
          return;
        }
      });
    };

    const observer = new IntersectionObserver(
      observerCallback,
      observerOptions
    );

    observer.observe(hero);
  });
</script>
